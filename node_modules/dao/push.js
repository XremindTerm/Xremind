module.exports.push = function (users, callback) {
    var sendflag = false;
    //获取在线的全部用户
    var userAllList = require('./../node_modules/dao/socket').userlist;

    if (typeof user != Object) {
        if (callback && typeof(callback) == 'function') {
            callback(false, 'please send a object to me :)');
        }
        return false;
    }

    //确定在线用户列表，开始消息推送
    for (var u_push in users) {
        for (var name in userAllList) {
            if (name.toString() == u_push.toString()) {
                userAllList[name].emit('chatBack', {
                    msg: users[u_push]
                });
                //删除成功推送的，即为失败推送的
                delete users[u_push];

            }
        }
        sendflag = true;
    }


    if (callback && typeof(callback) == 'function') {
        if (sendflag) {
            callback(false, users);
        } else {
            callback(true, 'Socket connect error,please wait a monent');
        }
    }
};