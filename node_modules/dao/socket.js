var userList = {};
module.exports.socket = function (io) {
    var app = require('express');
    var router = app.Router();
    io.on('connection', function (socket) {
        console.log("New client is connected(id =" + socket.id + ")");
        var nickname = '';

        socket.on('init', function (msg) {
            nickname = msg.nickname.toString();
            if (!userList.hasOwnProperty(nickname)) {
                userList[nickname] = socket;
            }
            console.log(userList);
            // console.log(socket)
            //

            // client.set("mastersocket", socket, function (err) {
            //     if (err) throw err;
            //     console.log("Master socket is now" + socket);
            // });
        });

        socket.on('server', function (msg) {
            console.log(msg)
        });

        socket.on('disconnect', function (msg) {
            console.info('Client gone (id=' + socket.id + ').');
            delete userList[nickname];
        })
    });

    return router;
};

module.exports.userlist = userList;
/**
 * Created by jack on 8/7/16.
 */