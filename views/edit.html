{% extends "layout.html" %}

{% block title %}登录{% endblock %}
{% block head %}
    <style>
        html, body {
            padding: 0;
            margin: 0;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            overflow-x: hidden;
        }

        .editList {
            list-style: none;
            padding-left: 0;
            margin: 0;
        }

        header {
            height: 44px;
            width: 100%;
            top: 0;
            position: relative;
            /* background-color: #03A9F4; */
            color: #fff;
            line-height: 50px;
            clear: both;
        }

        .btnSend, .btnReturn {
            display: flex;
            align-items: center;
            position: relative;
            left: 10px;
        }

        header > span > img {
            width: 31px;
            margin: 8px 0 8px;
        }

        .btnEdit {
            position: absolute;
            bottom: 38px;
            cursor: pointer;
            right: 36px;
            box-shadow: 2px 2px 18px #949494;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
            /* border: 1px solid #ddd; */
            width: 60px;
            height: 60px;
            background-color: #2196F3;
            display: inline-block;
            border-radius: 30px;
            line-height: 70px;
            text-align: center
        }

        .btnEdit > img {
            width: 43px;
            padding-top: 9px;
        }

        .subform, .subform > label {
            width: 100%;
            /*height: 100%;*/
            margin-top: 10px;
            margin-bottom: 0;

        }

        .textarea {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #editConent {
            width: 100%;
            resize: none;
            height: 100%;
            display: inline-block;
            text-align: left;
            font-size: 16px;
            outline: none;
            padding: 13px;
            border: none;
            overflow: hidden;
        }

        .subform > label > textarea {
            width: 100%;
            /*height: 100%;*/
            border: none;
            border-bottom: 1px solid #ddd;
            padding-left: 13px;
            font-size: 16px;
            color: #32b9f6;
            outline: none;
            overflow-y: visible;
            resize: none;
        }
    </style>
{% endblock %}
{% block content %}
    <header>
        <span class="btnReturn"><img src="/img/return.png" alt="返回"></span>
        {#<span class="btnCheck"><img src="/img/check.png" alt="发送"></span>#}
    </header>
    <form action="/reminder/add" method="post" id="userPost">
        <section class="warp" id="formContent">
            <ul class="editList">
                <li><p class="subform">
                        <label for="title"><textarea onkeyup="addHeight(this)" name="nickname" id="title" required placeholder="写下标题"></textarea></label>
                    </p></li>
                <li>
                    <p class="textarea">
                        <textarea name="content" id="editConent" required placeholder="写你所想..."></textarea></p></li>
            </ul>
        </section>
        <input type="submit" class="btnEdit">
            <img src="/img/edit.png" alt="编辑">
        </input>
    </form>
{{ status }}<br>
    {{ detail }}
    <script type="text/javascript">
        function init() {
            if(!document.getElementById)return false;
            if (!document.getElementById('title')) return false;
            if (!document.getElementById('title')) return false;
            if(new XMLHttpRequest){
                return true
            }else {
                return false;
            }
        }


        function addHeight(o) {
            if (window.navigator.userAgent.indexOf("Firefox") > -1) {
                o.style.height = o.scrollTop + o.scrollHeight + "px";
            }
            else {
                if (o.scrollTop > 0) o.style.height = o.scrollTop + o.scrollHeight + "px";
            }
        }
function complieDate() {

    //初始化数据
    var title = document.getElementById('title').value.toString();
    var editConent = document.getElementById('editConent').value.toString();
    var content = new Object();
    content.id = '';
    var data = new Object();
    data.title = title;
    data.content = editConent;
    content.data = data;
    return formatData(content,10);
}        //格式化数据
        function formatData(content,id) {
            var paraDate='';
            return paraData ="data="+JSON.stringify(content)+"&&id="+id;
        }



        function postEdit() {
            //Get request
            var request = new XMLHttpRequest();

            if (request) {
                request.open('POST', '/reminder/add', true);
                request.setRequestHeader("Content-type","application/x-www-form-urlencoded");
                request.onreadystatechange = function () {
                    if (request.readyState == 4 && request.status) {
                        if (request.status == 200) {
                            var text = request.responseText;
                            console.log(text);
                        }
                    }
                };
                request.send(complieDate);
                return false;
            } else {
                alert('Sorry,your browser doesn\'t support XMLHttpRequeset');
                return true;
            }
        }

        function addLoadEvent(func) {
            var oldonload = window.onload;
            if (typeof window.onload != 'function') {
                window.onload = func;
            } else {
                window.onload = function () {
                    oldonload();
                    func();
                }
            }
        }
        function setLinstener() {
            var userPost =document.getElementById('userPost');
            userPost.addEventListener('submit',function () {
                return postEdit();
            },false);

        }
        addLoadEvent(setLinstener);
    </script>
{% endblock %}
